Opening:

username is not specified:
-field is enabled
-check credentials is disabled
-change username is disabled

  on specifying:
  -enable "check credentials"

username is specified:
-field is disabled
-buttons are enabled

 on clicking "change username":
 -enable username
 -disable "change username"

on cancel:
-do nothing

on ok:
-do action (if username was changed)
-update settings